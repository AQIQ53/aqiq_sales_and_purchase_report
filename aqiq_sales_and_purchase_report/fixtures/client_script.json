[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2024-07-26 16:29:01.781513",
  "module": "Aqiq Sales And Purchase Report",
  "name": "Item Script",
  "script": "frappe.ui.form.on('Item', {\n\trefresh(frm) {\n\t\t// your code here\n\t},\n\tonload_post_render: function(frm) {\n        if (frm.is_dirty()) {\n            frm.doc.__is_first_save = true;\n        }\n    },\n    validate: function(frm) {\n        if (frm.doc.__is_first_save) {\n        \tfrappe.call({\n                method: 'aqiq_sales_and_purchase_report.service.item_changes.item_before_insert',\n                args: {\n                    'self':frm.doc.custom_company\n                },\n                callback: function(r) {\n                    if (!r.exc) {\n                        // code snippet\n                        frm.clear_table('taxes');\n                        for (var i = 0; i < r.message.length; i++) {\n                            var new_sales_person = frm.add_child(\"taxes\", {\n                                \"item_tax_template\": r.message[i].item_tax_template,\n                                \"tax_category\": r.message[i].tax_category,\n                                \"valid_from\": r.message[i].valid_from,\n                                \"minimum_net_rate\": r.message[i].minimum_net_rate,\n                                \"maximum_net_rate\": r.message[i].maximum_net_rate,\n                            });\n                        }\n                        frm.refresh_field('taxes');\n                    }\n                }\n            });\n            frm.doc.__is_first_save = false;\n\n        }\n    }\n})",
  "view": "Form"
 }
]